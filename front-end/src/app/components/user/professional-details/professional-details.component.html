<!-- professional-details.component.html -->
<div class="professional-details-content">
  <h2>Professional Details</h2>
  
  <ng-container *ngIf="(professionalDetails$ | async) as details">

    <div class="profile-card" *ngIf="!isEditing && details.title">
      <div class="profile-item">
        <strong>Title:</strong> {{ details.title }}
      </div>
      <div class="profile-item">
        <strong>Skills:</strong>
         {{ details.skills }}
      </div>
      <div class="profile-item">
        <strong>Experience (years):</strong> {{ details.experience }}
      </div>
      <div class="profile-item">
        <strong>Current Location:</strong> {{ details.currentLocation }}
      </div>
      <div class="profile-item">
        <strong>Expected Salary (₹/year):</strong> {{ details.expectedSalary }}
      </div>
      <div class="profile-item">
        <strong>About:</strong> {{ details.about }}
      </div>
      <div class="profile-item">
        <strong>Resume:</strong> 
        <a [href]="details.resumeUrl" target="_blank">View Resume</a>
      </div>
      <button class="edit-button" (click)="toggleEdit()">Edit</button>
    </div>

    <!-- Show form when editing -->
    <form *ngIf="isEditing" [formGroup]="detailsForm" class="profile-card edit-form" (ngSubmit)="onSubmit()">
      <div class="form-header">
        <h3>{{ details?.title ? 'Edit Professional Details' : 'Add Professional Details' }}</h3>
        <div class="form-actions">
          <button type="button" class="cancel-button" (click)="toggleEdit()">
            <i class="fas fa-times"></i> Cancel
          </button>
          <button type="submit" class="save-button">
            <i class="fas fa-check"></i> Save
          </button>
        </div>
      </div>

      <div class="form-grid">
        <div class="form-group">
          <label>Title</label>
          <input type="text" formControlName="title" [value]="details.title" placeholder="e.g. MEAN Stack Developer">
        </div>

        <div class="form-group">
          <label>Skills</label>
          <input type="text" formControlName="skills" [value]="details.skills" placeholder="e.g. Angular, Node.js, MongoDB">
          <small>Separate skills with commas</small>
        </div>

        <div class="form-group">
          <label>Experience (years)</label>
          <input type="number" formControlName="experience" [value]="details.experience" min="0" step="0.5">
        </div>

        <div class="form-group">
          <label>Current Location</label>
          <input type="text" formControlName="currentLocation" [value]="details.currentLocation">
        </div>

        <div class="form-group">
          <label>Expected Salary (₹/year)</label>
          <input type="number" formControlName="expectedSalary" [value]="details.expectedSalary">
        </div>
      </div>

      <div class="form-group">
        <label>About</label>
        <textarea formControlName="about" rows="4">{{ details.about }}</textarea>
      </div>

      <div class="form-group">
        <label>Resume</label>
        <input type="file" (change)="onFileSelect($event)" accept=".pdf,.doc,.docx">
        <small>Supported formats: PDF, DOC, DOCX (Max 5MB)</small>
      </div>
    </form>
  </ng-container>

  <!-- Show add button when no details exist and not editing -->
  <div class="add-details-container" *ngIf="!(professionalDetails$ | async) && !isEditing">
    <p>No professional details added yet</p>
    <button class="add-button" (click)="startAdding()">
      <i class="fas fa-plus"></i> Add Professional Details
    </button>
  </div>

  <!-- Show form when adding new details -->
  <form *ngIf="isEditing && !(professionalDetails$ | async)" [formGroup]="detailsForm" class="profile-card edit-form" (ngSubmit)="onSubmit()">
    <div class="form-header">
      <h3>Add Professional Details</h3>
      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="toggleEdit()">
          <i class="fas fa-times"></i> Cancel
        </button>
        <button type="submit" class="save-button">
          <i class="fas fa-check"></i> Save
        </button>
      </div>
    </div>

    <div class="form-grid">
      <div class="form-group">
        <label>Title</label>
        <input type="text" formControlName="title" placeholder="e.g. MEAN Stack Developer">
      </div>

      <div class="form-group">
        <label>Skills</label>
        <input type="text" formControlName="skills" placeholder="e.g. Angular, Node.js, MongoDB">
        <small>Separate skills with commas</small>
      </div>

      <div class="form-group">
        <label>Experience (years)</label>
        <input type="number" formControlName="experience" min="0" step="0.5">
      </div>

      <div class="form-group">
        <label>Current Location</label>
        <input type="text" formControlName="currentLocation">
      </div>

      <div class="form-group">
        <label>Expected Salary (₹/year)</label>
        <input type="number" formControlName="expectedSalary">
      </div>

      <div class="form-group">
        <label>Resume</label>
        <input type="file" (change)="onFileSelect($event)" accept=".pdf,.doc,.docx">
        <small>Supported formats: PDF, DOC, DOCX (Max 5MB)</small>
      </div>
    </div>

    <div class="form-group">
      <label>About</label>
      <textarea formControlName="about" rows="4"></textarea>
    </div>
  </form>
</div>
