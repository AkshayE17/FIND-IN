<div class="otp-container">
  <h2>OTP Verification</h2>
  <p>Please enter the OTP sent to your email.</p>

  <form [formGroup]="otpForm" (ngSubmit)="onSubmitOtp()">
    <div class="otp-input-container">
      <input 
        #otpInput
        type="text" 
        formControlName="digit1" 
        maxlength="1" 
        class="otp-input">
      <input 
        #otpInput
        type="text" 
        formControlName="digit2" 
        maxlength="1" 
        class="otp-input">
      <input 
        #otpInput
        type="text" 
        formControlName="digit3" 
        maxlength="1" 
        class="otp-input">
      <input 
        #otpInput
        type="text" 
        formControlName="digit4" 
        maxlength="1" 
        class="otp-input">
      <input 
        #otpInput
        type="text" 
        formControlName="digit5" 
        maxlength="1" 
        class="otp-input">
      <input 
        #otpInput
        type="text" 
        formControlName="digit6" 
        maxlength="1" 
        class="otp-input">
    </div>
    <div *ngIf="otpForm.invalid && (otpForm.touched || otpForm.dirty)" class="error-message">
      Please enter a valid 6-digit OTP.
    </div>

    <div class="timer">Time remaining: {{ formatTime(timeLeft) }}</div>

    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

    <div class="button-container">
      <button type="submit" [disabled]="otpForm.invalid || timeLeft === 0" class="verify-button">Verify OTP</button>
      <button type="button" (click)="openCloseConfirmation()" class="cancel-button">Cancel</button>
    </div>
  </form>

  <div class="resend-container">
    <p>Didn't receive the OTP?</p>
    <button (click)="resendOtp()" [disabled]="timeLeft > 0" class="resend-button">Resend OTP</button>
  </div>

  <!-- Close Confirmation Modal -->
  <div *ngIf="showCloseConfirmation" class="close-confirmation-overlay">
    <div class="close-confirmation-modal">
      <h3>Confirm Close</h3>
      <p>Are you sure you want to close the OTP verification?</p>
      <div class="close-confirmation-actions">
        <button (click)="confirmClose()" class="confirm-close-button">Yes, Close</button>
        <button (click)="cancelClose()" class="cancel-close-button">No, Continue</button>
      </div>
    </div>
  </div>
</div>